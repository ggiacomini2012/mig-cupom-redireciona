<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guilherme Indica - Made in Guarda</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>üõçÔ∏è Obrigado por comprar com meu cupom!</h1>
        <p></p>
        
        <div class="cupom-box" id="cupom-box">Clique para copiar: <span id="cupom-text">guilhermemig</span></div>
        <p id="copy-feedback" style="font-size: 12px; color: red; margin-top: 5px; display: none;"></p>
        
        <div class="instructions">
            <p><strong>Como usar meu cupom:</strong></p>
            <ol>
                <li>Finalize sua compra normalmente</li>
                <li>Na p√°gina de pagamento, procure por <span class="highlight">"Cupom de desconto"</span></li>
                <li>Cole ou digite: <span class="highlight">guilhermemig</span></li>
                <li>Se n√£o houver desconto, voc√™ <span class="highlight">n√£o paga nada a mais</span> e ainda me ajuda!</li>
            </ol>
        </div>
        
        <!-- com.br plus hash url parameter exemplo: https://www.madeinguarda.com.br/saias -->
         <!-- site plus this web site adress plus the hash url parameter -->
        <a href="https://www.madeinguarda.com.br$(/)" class="btn">Ir para o site agora</a>
        
        <input type="text" id="test-paste-input" placeholder="Cole aqui para testar" aria-label="Campo para testar cupom colado">
        
        <p style="margin-top: 30px; font-size: 14px; color: #7f8c8d;">Cupom afiliado - Guilherme agradece sua ajuda! ‚ù§Ô∏è</p>
    </div>

    <script>
        const cupomBox = document.getElementById('cupom-box');
        const cupomText = 'guilhermemig';
        const feedbackElement = document.getElementById('copy-feedback');

        cupomBox.addEventListener('click', function() {
            feedbackElement.style.display = 'none'; // Reseta a mensagem
            feedbackElement.textContent = '';

            // Verifica se a API Clipboard est√° dispon√≠vel e se o contexto √© seguro (HTTPS)
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(cupomText).then(() => {
                    // Sucesso na c√≥pia
                    this.classList.add('copied');
                    setTimeout(() => {
                        this.classList.remove('copied');
                    }, 3000);
                }).catch(err => {
                    // Falha ao copiar (permiss√£o negada, etc.)
                    console.error('Falha ao copiar com navigator.clipboard:', err);
                    feedbackElement.textContent = 'Falha ao copiar. Tente selecionar e copiar manualmente.';
                    feedbackElement.style.display = 'block';
                    // Opcional: remover o cursor pointer para indicar sele√ß√£o
                    // this.style.cursor = 'text'; 
                });
            } else {
                // Fallback para iOS antigo ou HTTP (ou navegadores sem suporte)
                // Tenta o m√©todo antigo (pode funcionar em alguns casos, mas menos confi√°vel)
                try {
                    const tempInput = document.createElement('input');
                    tempInput.value = cupomText;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy'); // Pode n√£o funcionar no iOS moderno
                    document.body.removeChild(tempInput);
                    
                    // Se chegou aqui, o m√©todo antigo funcionou
                    this.classList.add('copied');
                    setTimeout(() => {
                        this.classList.remove('copied');
                    }, 3000);

                } catch (err) {
                     // M√©todo antigo tamb√©m falhou
                    console.error('Falha ao copiar com document.execCommand:', err);
                    feedbackElement.textContent = 'N√£o foi poss√≠vel copiar automaticamente. Por favor, selecione e copie o cupom acima.';
                    feedbackElement.style.display = 'block';
                    // Opcional: remover o cursor pointer para indicar sele√ß√£o
                    // this.style.cursor = 'text'; 
                }
            }
        });

        // Verifica o hash da URL e atualiza o href do bot√£o se necess√°rio
        const btn = document.querySelector('.btn');
        if (window.location.hash) {
            const hash = '/' + window.location.hash;
            btn.href = 'https://www.madeinguarda.com.br' + hash;
        }
    </script>
</body>
</html>